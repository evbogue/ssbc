<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Phoenix Feed</title>
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,500,700" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div class="app-shell">
    <header class="top-nav">
      <div class="tabs">
        <a class="tab" href="#feed" data-view="feed">
          <span class="material-icon" aria-hidden="true">home</span>
          <span class="tab-label">home</span>
        </a>
        <a class="tab" href="#inbox" data-view="inbox">
          <span class="material-icon" aria-hidden="true">inbox</span>
          <span class="tab-label">inbox (0)</span>
        </a>
        <a class="tab" href="#data" data-view="data">
          <span class="material-icon" aria-hidden="true">storage</span>
          <span class="tab-label">all data</span>
        </a>
        <a class="tab" href="#network" data-view="network">
          <span class="material-icon" aria-hidden="true">share</span>
          <span class="tab-label">network</span>
        </a>
        <a class="tab" href="#help" data-view="help">
          <span class="material-icon" aria-hidden="true">help</span>
          <span class="tab-label">help</span>
        </a>
      </div>
      <div class="url-bar">http://localhost:8008/#/</div>
    </header>

    <main class="layout">
      <div class="view view-feed active" data-view="feed">
        <section class="feed">
          <div class="post-box">
            <textarea placeholder="What's new?"></textarea>
            <div class="post-actions">
              <button type="button">Post</button>
            </div>
          </div>

          <div id="posts"></div>
        </section>

        <aside class="friends-panel">
          <h2>Friends</h2>
          <div class="hex-grid" id="hexGrid"></div>
          <ul class="friend-actions">
            <li>Get your id</li>
            <li>Add a contact</li>
            <li>Use an invite</li>
            <li>More help</li>
          </ul>
        </aside>
      </div>

      <div class="view empty-view" data-view="inbox">
        <section class="empty-state">
          <h2>Inbox</h2>
          <p>This view would list your inbox threads once messaging syncs are running.</p>
        </section>
      </div>

      <div class="view empty-view" data-view="data">
        <section class="empty-state">
          <h2>All Data</h2>
          <p>Here the historical posts, rooms, and metadata would be available.</p>
        </section>
      </div>

      <div class="view empty-view" data-view="network">
        <section class="empty-state">
          <h2>Network</h2>
          <p>You'll see peers, connection stats, and pub links on this screen.</p>
        </section>
      </div>

      <div class="view empty-view" data-view="help">
        <section class="empty-state">
          <h2>Help</h2>
          <p>Docs, guides, and invite tips would appear here.</p>
        </section>
      </div>
    </main>
  </div>

  <script>
    var posts = [
      {
        name: 'ootoovak',
        time: '1d ago',
        content: 'Inaugural "None of your business" / "Inventive Engineers" lightning talks: https://youtu.be/D6HofmNDDgw https://youtu.be/tRY4wHfRdBQ',
        avatar: 'https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=150&q=60',
        replies: 2,
        ups: 0
      },
      {
        name: 'pfraze',
        time: '2d ago',
        content: 'Escape key to close modal is being temperamental. I\'ll address that soon.',
        avatar: 'https://images.unsplash.com/photo-1511367461989-f85a21fda167?auto=format&fit=crop&w=150&q=60',
        replies: 0,
        ups: 0
      },
      {
        name: 'joshuavial',
        time: '2d ago',
        content: '@pfraze @dominic have you given much thought to what a contact list would look like? I would like to create an address for our "inventive engineers" meetup group that people could follow and when I mention that address I would like it to act as if I had mentioned each person who follows it.',
        avatar: 'https://images.unsplash.com/photo-1544723795-3fb6469f5b39?auto=format&fit=crop&w=150&q=60',
        replies: 2,
        ups: 1
      },
      {
        name: 'dinosaur',
        time: '3d ago',
        content: 'Samson just ran me through the setup ... by joshuavial. i\'m away with @dominic, Derek, and Tom on a sailing trip around the Coromandel area, so i\'m not able to make it this Thursday, but super keen to come next week!',
        avatar: 'https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=150&q=60',
        replies: 0,
        ups: 2
      }
    ]

    var hexFaces = [
      'https://images.unsplash.com/photo-1504593811423-6dd665756598?auto=format&fit=crop&w=200&q=60',
      'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?auto=format&fit=crop&w=200&q=60',
      'https://images.unsplash.com/photo-1504593811423-6dd665756598?auto=format&fit=crop&w=200&q=60',
      'https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=200&q=60',
      'https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&w=200&q=60',
      'https://images.unsplash.com/photo-1544723795-3fb6469f5b39?auto=format&fit=crop&w=200&q=60',
      'https://images.unsplash.com/photo-1463453091185-61582044d556?auto=format&fit=crop&w=200&q=60',
      'https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=200&q=60',
      'https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=200&q=60',
      'https://images.unsplash.com/photo-1504593811423-6dd665756598?auto=format&fit=crop&w=200&q=60',
      'https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=200&q=60',
      'https://images.unsplash.com/photo-1504593811423-6dd665756598?auto=format&fit=crop&w=200&q=60'
    ]

    var postsContainer = document.getElementById('posts')
    posts.forEach(function (post) {
      var postCard = document.createElement('article')
      postCard.className = 'post'

      postCard.innerHTML = `
        <div class="avatar hex">
          <img src="${post.avatar}" alt="${post.name} avatar" />
        </div>
        <div class="post-content">
          <div class="meta">
            <strong>${post.name}</strong>
            <span>${post.time}</span>
          </div>
          <p>${post.content}</p>
          <div class="post-meta">
            <span>â–² ${post.ups}</span>
            <span>â–¼ 0</span>
            <span>ðŸ’¬ ${post.replies}</span>
          </div>
        </div>
      `

      postsContainer.appendChild(postCard)
    })

    var hexGrid = document.getElementById('hexGrid')
    var horizontalShift = 34
    var verticalStep = 6
    hexFaces.forEach(function (src, index) {
      var face = document.createElement('div')
      face.className = 'hex friend-hex'
      face.style.backgroundImage = 'url(' + src + ')'
      var row = Math.floor(index / 3)
      var offset = row > 0 ? row * verticalStep : 0
      if (offset) face.style.marginTop = -offset + 'px'
      if (row % 2 === 1) {
        face.style.transform = 'translateX(' + horizontalShift + 'px)'
      }
      hexGrid.appendChild(face)
    })

    var tabs = document.querySelectorAll('.tab')
    var views = document.querySelectorAll('.view')

    function getRoute () {
      var hash = window.location.hash
      var route = hash.replace(/^#\/?/, '')
      return route || 'feed'
    }

    function activateView (viewName) {
      views.forEach(function (view) {
        view.classList.toggle('active', view.dataset.view === viewName)
      })
      tabs.forEach(function (tab) {
        tab.classList.toggle('active', tab.dataset.view === viewName)
      })
    }

    function handleHashChange () {
      activateView(getRoute())
    }

    window.addEventListener('hashchange', handleHashChange)
    handleHashChange()
  </script>
</body>

</html>
